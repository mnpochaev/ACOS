    .data                          # Директива секции данных (не команда процессора)
prompt: 
    .asciz "n = "                  # Нуль-терминированная строка для вывода

    .text                          # Директива: начало секции кода
    .globl main                    # Директива: сделать метку main видимой извне (точка входа)

# Программа вычисляет n-е число Фибоначчи
main:
    # --- вывод приглашения "n = " ---
    li   a7, 4                     # ПСЕВДОКОМАНДА: li rd, imm → I-формат addi a7, x0, 4
                                   # Системный вызов print_string (код 4 в a7)
    la   a0, prompt                # ПСЕВДОКОМАНДА: la rd, label → U/J/I-формат (lui + addi)
                                   # Загружает адрес строки prompt в a0
    ecall                          # СИСТЕМНЫЙ ВЫЗОВ RARS, код операции в a7

    # --- ввод n ---
    li   a7, 5                     # ПСЕВДОКОМАНДА: li a7, 5 → I-формат addi a7, x0, 5
                                   # Системный вызов read_int (прочитать целое в a0)
    ecall                          # СИСТЕМНЫЙ ВЫЗОВ RARS
    mv   t3, a0                    # ПСЕВДОКОМАНДА: mv rd, rs → I-формат addi t3, a0, 0
                                   # t3 = n (счётчик цикла)

    # --- инициализация первых двух чисел Фибоначчи ---
    mv   t0, x0                    # ПСЕВДОКОМАНДА: mv t0, x0 → I-формат addi t0, x0, 0
                                   # t0 = F(0) = 0
    li   t1, 1                     # ПСЕВДОКОМАНДА: li t1, 1 → I-формат addi t1, x0, 1
                                   # t1 = F(1) = 1

fib:                               # Метка начала цикла
    beqz t3, finish                # ПСЕВДОКОМАНДА: beqz rs, label → B-формат beq t3, x0, finish
                                   # Если t3 == 0, переходим к завершению
    add  t2, t1, t0                # R-ФОРМАТ: add rd, rs1, rs2 (t2 = t1 + t0)
    mv   t0, t1                    # ПСЕВДОКОМАНДА: mv t0, t1 → I-формат addi t0, t1, 0
                                   # Сдвигаем F(k) в t0
    mv   t1, t2                    # ПСЕВДОКОМАНДА: mv t1, t2 → I-формат addi t1, t2, 0
                                   # Сдвигаем F(k+1) в t1
    addi t3, t3, -1                # I-ФОРМАТ: addi rd, rs1, imm (t3 = t3 - 1)
    j    fib                       # ПСЕВДОКОМАНДА: j label → J-формат jal x0, fib
                                   # Безусловный переход в начало цикла

finish:                            # Метка завершения вычислений
    # --- вывод результата F(n), лежит в t0 ---
    li   a7, 1                     # ПСЕВДОКОМАНДА: li a7, 1 → I-формат addi a7, x0, 1
                                   # Системный вызов print_int
    mv   a0, t0                    # ПСЕВДОКОМАНДА: mv a0, t0 → I-формат addi a0, t0, 0
                                   # В a0 кладём число Фибоначчи
    ecall                          # СИСТЕМНЫЙ ВЫЗОВ RARS: печать результата

    # --- завершение программы ---
    li   a7, 10                    # ПСЕВДОКОМАНДА: li a7, 10 → I-формат addi a7, x0, 10
                                   # Системный вызов exit
    ecall                          # СИСТЕМНЫЙ ВЫЗОВ RARS: выход из программы
